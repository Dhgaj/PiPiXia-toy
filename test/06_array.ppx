# 数组操作测试
# 测试数组的创建、访问、修改和多维数组

func main(): int {
    print("===== 数组操作测试 =====")
    print("")
    
    # 一维数组测试
    print("1. 一维数组:")
    let arr1: int[5] = [1, 2, 3, 4, 5]
    print("  arr1[0] = ${arr1[0]} (应输出: 1)")
    print("  arr1[2] = ${arr1[2]} (应输出: 3)")
    print("  arr1[4] = ${arr1[4]} (应输出: 5)")
    
    # 修改数组元素
    arr1[1] = 100
    print("  修改后 arr1[1] = ${arr1[1]} (应输出: 100)")
    print("")
    
    # 浮点数数组
    print("2. 浮点数数组:")
    let arr2: double[4] = [1.5, 2.5, 3.5, 4.5]
    print("  arr2[0] = ${arr2[0]} (应输出: 1.5)")
    print("  arr2[3] = ${arr2[3]} (应输出: 4.5)")
    
    arr2[2] = 10.5
    print("  修改后 arr2[2] = ${arr2[2]} (应输出: 10.5)")
    print("")
    
    # 二维数组测试
    print("3. 二维数组:")
    let matrix: int[2][3] = [[1, 2, 3], [4, 5, 6]]
    
    # 由于字符串插值中的二维数组访问有编译器bug，这里使用临时变量
    let m00: int = matrix[0][0]
    let m02: int = matrix[0][2]
    let m10: int = matrix[1][0]
    let m12: int = matrix[1][2]
    
    print("  matrix[0][0] = ${m00} (应输出: 1)")
    print("  matrix[0][2] = ${m02} (应输出: 3)")
    print("  matrix[1][0] = ${m10} (应输出: 4)")
    print("  matrix[1][2] = ${m12} (应输出: 6)")
    print("")
    
    # 数组运算
    print("4. 数组元素运算:")
    let sum: int = arr1[0] + arr1[1] + arr1[4]
    print("  arr1[0] + arr1[1] + arr1[4] = ${sum} (应输出: 106)")
    
    let product: int = matrix[0][1] * matrix[1][0]
    print("  matrix[0][1] * matrix[1][0] = ${product} (应输出: 8)")
    print("")
    
    # 数组索引表达式
    print("5. 数组索引表达式:")
    let idx: int = 2
    print("  arr1[idx] = ${arr1[idx]} (应输出: 3)")
    
    let i: int = 0
    let j: int = 1
    # 二维数组索引表达式也需要使用临时变量
    let mij: int = matrix[i][j]
    print("  matrix[i][j] = ${mij} (应输出: 2)")
    print("")
    
    print("数组测试完成！")
    return 0
}
